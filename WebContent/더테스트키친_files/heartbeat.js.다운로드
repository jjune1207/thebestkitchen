(function(g){var window=this;var w5=function(a){g.W.call(this,{D:"button",W:["ytp-offline-slate-button","ytp-button"],K:[{D:"div",I:"ytp-offline-slate-button-icon",V:"{{icon}}"},{D:"div",I:"ytp-offline-slate-button-text",V:"{{text}}"}]});this.B=a;this.w=this.u=null;this.hide();this.ga("click",this.C,this)},gta=function(a,b){!a.u&&b&&b.toggleButtonRenderer?a.u=b.toggleButtonRenderer:b&&b.toggleButtonRenderer||(a.u=null);
x5(a)},x5=function(a){if(a.u){if(a.u.isToggled){var b=a.u.toggledText?g.QA(a.u.toggledText):"";
a.update({text:b,icon:hta(a.u.toggledIcon)})}else b=a.u.defaultText?g.QA(a.u.defaultText):"",a.update({text:b,icon:hta(a.u.defaultIcon)});a.show()}else a.hide()},hta=function(a){if(!a)return null;
switch(a.iconType){case "NOTIFICATIONS_NONE":return g.Y?{D:"div",W:["ytp-icon","ytp-icon-notifications-none"]}:{D:"svg",N:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},K:[{D:"path",N:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]};case "NOTIFICATIONS_ACTIVE":return g.aN();default:return null}},y5=function(a){g.W.call(this,
{D:"div",
I:"ytp-offline-slate",K:[{D:"div",I:"ytp-offline-slate-bar",K:[{D:"span",I:"ytp-offline-slate-icon",K:[g.Y?{D:"div",W:["ytp-icon","ytp-icon-live-icon"]}:{D:"svg",N:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},K:[{D:"path",N:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{D:"circle",N:{cx:"12",cy:"12",r:"3"}}]}]},{D:"span",I:"ytp-offline-slate-buttons"},{D:"span",I:"ytp-offline-slate-messages",K:[{D:"div",I:"ytp-offline-slate-main-text",V:"{{maintext}}"},{D:"div",I:"ytp-offline-slate-subtitle-text",V:"{{subtitletext}}"}]}]}]});this.w=a;this.A=this.u=null;this.F=!1;this.B=new g.K(this.G,1E3,this);this.L(a,"presentingplayerstatechange",this.H);this.L(a,"livestatedata",this.C);this.hide();a=this.w.getVideoData();a.getPlayerResponse()&&(a=a.getPlayerResponse().playabilityStatus)&&
this.C(a)},z5=function(a,b,c){if(b){var d=void 0!=b.subtitleText?g.QA(b.subtitleText):"";
b=c?c:void 0!=b.mainText?g.QA(b.mainText):"";a.update({maintext:b,subtitletext:d});g.M(a.element,"ytp-offline-slate-single-text-line",!d)}},B5=function(a){g.gQ.call(this,a);
var b=this;this.M=!1;this.J=0;this.G=!1;this.u=new g.K(function(){if(g.R(b.player.P().experiments,"web_player_innertube_heartbeat_client")){var d=b.player.P(),e=b.player.getVideoData();ita(b)&&(!A5(b)||e.ua?jta(b,d,e):kta(b,e))}else{var f=b.player.P();d=b.player.getVideoData();e=f.C;if(ita(b))if(!A5(b)||d.ua){var k=f.deviceParams;f={video_id:d.videoId,heartbeat_token:d.heartbeatToken,c:k.c,cver:k.cver,cbrand:k.cbrand,cmodel:k.cmodel,vvt:d.wf,mdx_environment:d.mdxEnvironment,access_token:d.oauthToken,
forced_experiments:f.za,utc_offset_minutes:b.O,upg_content_filter_mode:d.cp,sequence_number:b.A};k=b.player.P();void 0!=k.homeGroupInfo&&(f.home_group_info=k.homeGroupInfo);void 0!=k.livingRoomAppMode&&(f.living_room_app_mode=k.livingRoomAppMode);(k="undefined"!=typeof Intl?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)&&(f.time_zone=k);(k=g.iC(d))&&(f.uloc=k);(k=b.player.getProgressState().ingestionTime)&&isFinite(k)&&(f.ingestion_time=k);e=g.bh(e+"heartbeat",f);lta(b,d,e)}else kta(b,
d)}},0);
g.H(this,this.u);this.o=this.w=null;this.C=!1;this.H=new g.Nn(1E3,6E4,1);this.A=0;this.B=null;this.T=new g.Qr(a.P().Gg);this.O=-(new g.Kg).getTimezoneOffset();this.F=new g.ds(this);g.H(this,this.F);mta(this);this.F.L(a,"heartbeatparams",this.qG);this.F.L(a,"presentingplayerstatechange",this.rG);this.F.L(a,"videoplayerreset",this.iN);this.F.L(a,g.EE("heartbeat"),this.pG);this.C&&this.o&&nta(this,this.o);var c=new g.BE(1E3,0x7ffffffffffff,{priority:0,namespace:"heartbeat"});g.lM(a,[c])},A5=function(a){var b=
a.player.getVideoData();
return!!g.mC(a.player.getVideoData())&&!b.wx},C5=function(a){var b=a.player.getVideoData();
return A5(a)?!!a.w:!!b.heartbeatToken},D5=function(a,b){if(!a.u.isActive()&&a.M){var c=a.player.getVideoData();
if(C5(a)||c.ua)void 0==b&&(b=a.G?a.C?7500:a.w?1E3*a.w.interval:a.player.getVideoData().mx||6E4:1E3),a.u.start(b)}},lta=function(a,b,c){b.Ak&&(c=g.bh(c,{internalipoverride:b.Ak}));
var d={cpn:b.clientPlaybackNonce};b.contextParams&&(d.context_params=b.contextParams);b.Jg&&(d.kpt=b.Jg);c=g.bh(c,d);g.vq(c,{format:"RAW",method:"GET",timeout:3E4,onSuccess:(0,g.x)(a.HF,a),onError:(0,g.x)(a.Tx,a),Dd:(0,g.x)(a.Ux,a),withCredentials:!0})},kta=function(a,b){var c=g.bh(a.w.url,{request_id:g.Cs()});
b.wf&&(c=g.bh(c,{vvt:b.wf}),b.mdxEnvironment&&(c=g.bh(c,{mdx_environment:b.mdxEnvironment})));b.oauthToken&&(c=g.bh(c,{access_token:b.oauthToken}));lta(a,b,c)},ita=function(a){var b=a.player.getVideoData();
return 3==a.player.getPresentingPlayerType()||g.X(g.YL(a.player),4)?!1:C5(a)||b.ua?!0:(E5(a),!1)},jta=function(a,b,c){var d={videoId:c.videoId,
sequenceNumber:a.A},e={user:{},request:{}};c.mdxEnvironment&&(e.request.mdxEnvironment=c.mdxEnvironment);c.Jg&&(e.user.kidsParent={oauthToken:c.Jg});var f=b.deviceParams,k=b.Gg,l={utcOffsetMinutes:a.O,deviceId:f.cbr};f&&(l.deviceMake=f.cbrand||"www",l.deviceModel=f.cmodel||"www",l.browserName=f.cbr,l.browserVersion=f.cbrver,l.osName=f.cos,l.osVersion=f.cosver);k&&(l.clientName=k.pn,l.clientVersion=k.innertubeContextClientVersion,l.hl=k.yk,l.gl=k.xk);f=a.player.P();f.homeGroupInfo&&(l.homeGroupInfo=
JSON.parse(f.homeGroupInfo));if(k="undefined"!=typeof Intl?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)l.timeZone=k;f.livingRoomAppMode&&(l.tvAppInfo={livingRoomAppMode:f.livingRoomAppMode});e.client=l;c.contextParams&&(e.activePlayers=[],e.activePlayers.push({playerContextParams:c.contextParams}));d.context=e;d.cpn=c.clientPlaybackNonce;e={heartbeatChecks:[]};if(l=c.getPlayerResponse()){if(f=l.heartbeatParams)d.heartbeatToken=f.heartbeatToken;(l=l.playabilityStatus)&&(l=l.liveStreamability)&&
l.liveStreamabilityRenderer&&e.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_LIVE_STREAM_STATUS")}a.A||e.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_YPC");g.Fy(b)&&(e.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_UNPLUGGED"),(b=g.hC(c))&&d.context.client&&(d.context.client.unpluggedLocationInfo=b),(b=a.player.getProgressState().ingestionTime)&&isFinite(b)&&(c={},c.clientPlayerPositionUtcMillis=parseInt(b,10).toString(),e.unpluggedParams=c));d.heartbeatRequestParams=e;b={timeout:3E4,onSuccess:function(m){if(!a.u.isActive()){var n=
m.playabilityStatus,q=JSON.stringify(n)||"{}",t;if(m){var u=m.playabilityStatus;a.player.la("onHeartbeat",u);u&&(t="OK"==u.status?m.stopHeartbeat?2:0:"UNPLAYABLE"==u.status?1:"LIVE_STREAM_OFFLINE"==u.status?0:-1)}m=t;a.A&&-1===m||a.H.reset();a.A++;ota(a,n,q,m)}},
onError:(0,g.x)(a.Tx,a),Dd:(0,g.x)(a.Ux,a)};g.gr(a.T,"player/heartbeat",d,b)},ota=function(a,b,c,d){-1==d?(b="decode",window.btoa&&(b+=" "+window.btoa(c)),F5(a,!1,b)):2!==d||C5(a)?(a.J=0,a.u.stop(),1==d?(a.G=!1,a=a.player,b="LICENSE",(d=pta(c))?c=d.reason||g.WK[b]||"":((c=c.match(qta))&&(c=parseInt(c[1],10))&&(b=g.WD(c)),c=g.WK[b]||""),g.wK(a.app.w,"heartbeat.stop",c,void 0,void 0)):(a.G=!0,c=0,a.C&&b&&(c=nta(a,b),a.player.R("livestatedata",b)),c?D5(a,c):D5(a))):(E5(a),a.G=!0)},nta=function(a,b){var c=
b.liveStreamability&&b.liveStreamability.liveStreamabilityRenderer,d=!(!c||!c.switchStreamsImmediately),e=rta(c),f=a.player.getVideoData();
if(g.fE(g.YL(a.player))&&!g.tC(f)&&!a.player.isAtLiveHead()&&!d)return e;var k=(d=c&&c.streamTransitionEndpoint&&c.streamTransitionEndpoint.watchEndpoint)&&d.videoId;if(k)return g.aU(a.player.app,k,void 0,void 0,!0,d),e;if("OK"==b.status.toUpperCase()){d=c&&c.broadcastId;d=d!=(a.o&&a.o.liveStreamability&&a.o.liveStreamability.liveStreamabilityRenderer&&a.o.liveStreamability.liveStreamabilityRenderer.broadcastId)&&(d||a.player.fa("web_player_heartbeat_undefined_killswitch"));if(!f.hlsvp&&!f.Ud||d)return c=
{video_id:f.videoId},f.tn&&(c.is_live_destination="1"),c.autonav_state=f.autonavState,a.player.loadVideoByPlayerVars(c),e;g.mM(a.player,"heartbeat")}c&&c.displayEndscreen&&a.B&&(f=a.B,f.F=!0,f.Ea()&&g.CT(f.w.app,void 0));return e},rta=function(a){var b=0;
a&&a.pollDelayMs&&(a=parseInt(a.pollDelayMs,10))&&(b=a);return b},F5=function(a,b,c){if(!a.u.isActive()){a.u.stop();
a.J++;var d=a.player.getVideoData();(d.ox||b&&!g.mC(a.player.getVideoData())&&!C5(a)&&d.ua?0:a.J>=(a.w?a.w.o:d.nx||5))?(b=b?"heartbeat.net":"heartbeat.servererror",(d=a.player.getVideoData())&&d.ua?g.wK(a.player.app.w,b,"\ub3d9\uc601\uc0c1 \uc7ac\uc0dd\uc774 \uc911\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",c,void 0):g.wK(a.player.app.w,b,"\ub3d9\uc601\uc0c1\uc5d0 \ub77c\uc774\uc120\uc2a4\ub97c \ubd80\uc5ec\ud558\ub294 \uc911\uc5d0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.",
c,void 0)):(D5(a,a.H.getValue()),g.On(a.H))}},E5=function(a){a.J=0;
a.u.stop();a.G=!1;a.A=0},mta=function(a){var b=a.player.getVideoData(),c=a.player.P();
if(!b.ua)!g.R(c.experiments,"html5_release_post_live_heartbeat_killswitch")&&g.Ya(b.Mc,"heartbeat")&&g.mM(a.player,"heartbeat");else if(!g.lx(c.w))g.wK(a.player.app.w,"html5.unsupportedlive","HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1",void 0);else if(g.R(c.experiments,"live_fresca_v2")){a.C=!0;a.M=!0;if(!g.ty(c)||g.Fy(c))a.B=new y5(a.player),g.H(a,a.B),g.pM(a.player,a.B.element,4);(b=b.getPlayerResponse())&&b.playabilityStatus&&(a.o=b.playabilityStatus);a.o?(b=rta(a.o.liveStreamability&&a.o.liveStreamability.liveStreamabilityRenderer))?
D5(a,b):D5(a,7500):D5(a,1E3)}},pta=function(a){try{var b=JSON.parse(a);
return null!=b?b:null}catch(c){return null}};
g.r(w5,g.W);
w5.prototype.C=function(){this.w||(this.w=new g.Qr(this.B.P().Gg));var a=g.br(this.w.o||g.cr());g.Is()&&(a.context.clientScreenNonce=g.Is());var b;if(this.u.isToggled){if(b=(b=this.u.toggledServiceEndpoint)&&b.removeUpcomingEventReminderEndpoint&&b.removeUpcomingEventReminderEndpoint.params)a.params=b;b="notification/remove_upcoming_event_reminder"}else{if(b=(b=this.u.defaultServiceEndpoint)&&b.addUpcomingEventReminderEndpoint&&b.addUpcomingEventReminderEndpoint.params)a.params=b;b="notification/add_upcoming_event_reminder"}var c={timeout:5E3};
c.onError=(0,g.x)(this.A,this);c.Dd=(0,g.x)(this.A,this);g.gr(this.w,b,a,c);this.u.isToggled=!this.u.isToggled;x5(this)};
w5.prototype.A=function(){this.u&&(this.u.isToggled=!this.u.isToggled,x5(this))};g.r(y5,g.W);
y5.prototype.C=function(a){var b=a&&a.liveStreamability&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate;if(b){this.u=a;b=b.liveStreamOfflineSlateRenderer;b.canShowCountdown?this.G():z5(this,b);var c=a&&a.liveStreamability&&a.liveStreamability.liveStreamabilityRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer.thumbnail;if(c){for(var d=
0,e=null,f=0;f<c.thumbnails.length;f++)c.thumbnails[f].width>d&&(d=c.thumbnails[f].width,e=c.thumbnails[f].url);e&&(this.element.style.backgroundImage="url("+e+")")}else this.element.style.backgroundImage="";b.actionButtons?(this.A||(this.A=new w5(this.w),this.A.ca(this.o["ytp-offline-slate-buttons"]),g.H(this,this.A)),gta(this.A,b.actionButtons[0])):this.A&&gta(this.A,null);this.u=a}else this.u=null;this.H()};
y5.prototype.H=function(){var a=g.YL(this.w),b=this.w.getVideoData(),c=b.ua&&(g.iE(a)||g.X(a,2)||g.X(a,64)),d=2==b.autonavState&&g.X(a,2);a=g.fE(a)&&!g.tC(b)&&!this.w.isAtLiveHead(!0);c&&!a&&!d&&this.u&&"LIVE_STREAM_OFFLINE"==this.u.status.toUpperCase()?this.Ea()||(this.show(),this.w.R("offlineslatestatechange"),this.F&&g.CT(this.w.app,void 0)):this.Ea()&&(this.hide(),this.w.R("offlineslatestatechange"))};
y5.prototype.G=function(){var a=this.u&&this.u.liveStreamability&&this.u.liveStreamability.liveStreamabilityRenderer&&this.u.liveStreamability.liveStreamabilityRenderer.offlineSlate&&this.u.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer;if(a){var b=Math.floor((0,g.I)()/1E3),c=a.canShowCountdown&&parseInt(a.scheduledStartTime,10);!c||c<=b?(z5(this,a),this.B.stop()):(b=g.FM(c-b),z5(this,a,b),g.rn(this.B))}};
y5.prototype.X=function(){this.B.dispose();this.B=null;g.W.prototype.X.call(this)};g.r(B5,g.gQ);g.h=B5.prototype;g.h.X=function(){E5(this);g.wR(this.player.app,"heartbeat",void 0);g.gQ.prototype.X.call(this)};
g.h.pG=function(){this.M=!0;D5(this,2E3)};
g.h.qG=function(a){this.w=a;D5(this,2E3)};
g.h.rG=function(a){g.X(a.state,2)||g.X(a.state,64)?(E5(this),this.C&&(this.M=!0,D5(this,1E3))):(g.X(a.state,1)||g.X(a.state,8))&&D5(this,2E3)};
g.h.iN=function(){3!==this.player.getPresentingPlayerType()&&D5(this,2E3)};
g.h.HF=function(a){if(!this.u.isActive()){this.H.reset();this.A++;a=a.responseText;var b=pta(a);if(b){this.player.la("onHeartbeat",b);var c="ok"==b.status?b.stop_heartbeat?2:0:"stop"==b.status?1:"live_stream_offline"==b.status?0:-1}else c=(c=a.match(qta))?"0"==c[1]?0:1:-1;ota(this,b,a,c)}};
g.h.Tx=function(a){F5(this,!0,"net-"+a.status)};
g.h.Ux=function(){F5(this,!0,"timeout")};
g.h.oG=function(){return!!this.B&&this.B.Ea()};
var qta=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.vQ.heartbeat=B5;})(_yt_player);
